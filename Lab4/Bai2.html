<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.0/axios.min.js"
      integrity="sha512-bPh3uwgU5qEMipS/VOmRqynnMXGGSRv+72H/N260MQeXZIK4PG48401Bsby9Nq5P5fz7hy5UGNmC/W1Z51h2GQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <script>
      // 1.
      async function fetchUrls(urls) {
        const results = [];
        for (const url of urls) {
          //   const res = await axios.get(url);
          const res = await new Promise((resolve, reject) => {
            setTimeout(() => {
              console.log("Bài 1");
              resolve(1);
            }, 1000);
          });
          results.push(res);
        }
        // console.log);
        return results;
      }

      // 2.
      //   async function fetchUrlsParallel(urls) {
      //     const results = await Promise.all(
      //       urls.map(function (url) {
      //         return new Promise((resolve, reject) => {
      //             setTimeout(() => {
      //                 console.log("Bài ")
      //                 resolve(1);
      //             }, 1000);
      //         })
      //       })
      //     );
      //     return results;
      //   }

      const a = fetchUrls([
        "https://jsonplaceholder.typicode.com/users",
        "https://jsonplaceholder.typicode.com/posts",
        3,
        4,
        5,
      ]);

      //   const b = fetchUrlsParallel([
      //     "https://jsonplaceholder.typicode.com/users",
      //     "https://jsonplaceholder.typicode.com/posts",
      //     1,
      //     3,
      //     4
      //   ]);

      a.then((data) => {
        console.log(data);
      });

      //   b.then((data) => {
      //     console.log(data);
      //   });

      // Điểm khac nhau là :
      // Thằng 1 sẽ chạy lần lượt khi promise trả về trạng thái fulfilled, ví dụ:
      // Request đầu tiên tốn 1s
      // Request thứ 2 tốn 2s
      // Request thứ 3 tốn 3s
      // Tổng sẽ phải chờ 1 + 2 + 3 = 6s để hàm xử lý xong

      // Thằng 2 sẽ chạy đồng thời khi nào tất cả promise trả về trạng thái fulfilled sẽ tiếp tục thực thi, ví dụ:
      // Request đầu tiên tốn 1s
      // Request thứ 2 tốn 2s
      // Request thử 3 tốn 3s
      // Tổng sẽ phải chờ 3s để hàm xử lý xong.
    </script>
  </body>
</html>
